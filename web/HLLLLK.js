(function(_0x11a053,_0x3ab5e5){const _0x544c1a=_0x48c8,_0x415325=_0x11a053();while(!![]){try{const _0x205291=parseInt(_0x544c1a(0x193))/0x1+parseInt(_0x544c1a(0xec))/0x2+-parseInt(_0x544c1a(0x1a0))/0x3*(-parseInt(_0x544c1a(0x137))/0x4)+-parseInt(_0x544c1a(0x143))/0x5*(-parseInt(_0x544c1a(0xe2))/0x6)+parseInt(_0x544c1a(0x134))/0x7+-parseInt(_0x544c1a(0xc7))/0x8+-parseInt(_0x544c1a(0x17a))/0x9;if(_0x205291===_0x3ab5e5)break;else _0x415325['push'](_0x415325['shift']());}catch(_0x2b8d6c){_0x415325['push'](_0x415325['shift']());}}}(_0x1536,0xa0ba2));import{SVG,STYLES}from'./ALLLLLA.js';const ButtonManager={'isInitialized':![],'buttonContainer':null,'contextMenu':null,'isPermanent':!![],'initialX':0x0,'initialY':0x0,'dragStartX':0x0,'dragStartY':0x0,'isDragging':![],'hasShownTooltip':![],'boundOnDragging':null,'boundOnDragEnd':null,'undoStack':[],'redoStack':[],'maxUndoStackSize':0x32,'colorPicker':null,'bgColorPicker':null,'isUpdatingPickers':![],'init'(){const _0x30a2b5=_0x48c8;if(this['isInitialized'])return;const _0x1111d3=document[_0x30a2b5(0x13e)](_0x30a2b5(0x116));_0x1111d3['textContent']=STYLES,document[_0x30a2b5(0xd3)]['appendChild'](_0x1111d3),this[_0x30a2b5(0x196)]=document['createElement'](_0x30a2b5(0x176)),this[_0x30a2b5(0x196)]['id']='alignment-buttons',this[_0x30a2b5(0x196)]['style'][_0x30a2b5(0xe1)]='fixed',this[_0x30a2b5(0x196)]['style'][_0x30a2b5(0x17d)]=_0x30a2b5(0xfe),this['restorePosition'](),document['body']['appendChild'](this[_0x30a2b5(0x196)]),this[_0x30a2b5(0xe3)]=this[_0x30a2b5(0x122)][_0x30a2b5(0x171)](this),this['boundOnDragEnd']=this['onDragEnd'][_0x30a2b5(0x171)](this),this[_0x30a2b5(0x196)][_0x30a2b5(0x106)](_0x30a2b5(0x191),this[_0x30a2b5(0x18e)][_0x30a2b5(0x171)](this)),document[_0x30a2b5(0x106)](_0x30a2b5(0x16c),this[_0x30a2b5(0xe3)]),document['addEventListener']('mouseup',this[_0x30a2b5(0xe6)]),this[_0x30a2b5(0x184)](),this[_0x30a2b5(0x170)]=!![],this['setInitialVisibility'](),this[_0x30a2b5(0x18f)](),this['updateToggleButton']();},'initUndoRedo'(){const _0x36c029=_0x48c8;document['addEventListener'](_0x36c029(0x19e),_0x255165=>{const _0x5bd7a6=_0x36c029;if(_0x255165[_0x5bd7a6(0x11a)]||_0x255165['metaKey']){if(_0x255165['key']==='z')_0x255165[_0x5bd7a6(0x158)](),this[_0x5bd7a6(0xfa)]();else(_0x255165[_0x5bd7a6(0xfd)]==='y'||_0x255165[_0x5bd7a6(0xdc)]&&_0x255165[_0x5bd7a6(0xfd)]==='Z')&&(_0x255165['preventDefault'](),this[_0x5bd7a6(0xcc)]());}});},'addToUndoStack'(_0x35e25f){const _0x4e21d7=_0x48c8;this[_0x4e21d7(0xe7)]['push'](_0x35e25f),this[_0x4e21d7(0xe7)][_0x4e21d7(0xdd)]>this[_0x4e21d7(0xda)]&&this[_0x4e21d7(0xe7)][_0x4e21d7(0xf6)](),this[_0x4e21d7(0xfb)]=[],this[_0x4e21d7(0x15a)]();},'undo'(){const _0x4d94e6=_0x48c8;if(this[_0x4d94e6(0xe7)][_0x4d94e6(0xdd)]>0x0){const _0x14baae=this[_0x4d94e6(0xe7)][_0x4d94e6(0x18b)]();try{_0x14baae[_0x4d94e6(0xfa)](),this['redoStack'][_0x4d94e6(0x18a)](_0x14baae),this['updateCanvas']();}catch(_0x5c9f52){this['undoStack'][_0x4d94e6(0x18a)](_0x14baae);}finally{this['updateUndoRedoButtons']();}}},'redo'(){const _0x4faee5=_0x48c8;if(this['redoStack'][_0x4faee5(0xdd)]>0x0){const _0x56b902=this[_0x4faee5(0xfb)][_0x4faee5(0x18b)]();try{_0x56b902[_0x4faee5(0xcc)](),this[_0x4faee5(0xe7)]['push'](_0x56b902),this[_0x4faee5(0x16e)]();}catch(_0x228b4a){this[_0x4faee5(0xfb)][_0x4faee5(0x18a)](_0x56b902);}finally{this[_0x4faee5(0x15a)]();}}},'updateUndoRedoButtons'(){const _0x5d0b1b=_0x48c8,_0xd7024e=document[_0x5d0b1b(0x167)](_0x5d0b1b(0xfa)),_0x2bd855=document[_0x5d0b1b(0x167)](_0x5d0b1b(0xcc));if(_0xd7024e)_0xd7024e[_0x5d0b1b(0x125)]=this[_0x5d0b1b(0xe7)][_0x5d0b1b(0xdd)]===0x0;if(_0x2bd855)_0x2bd855[_0x5d0b1b(0x125)]=this['redoStack'][_0x5d0b1b(0xdd)]===0x0;},'createButtons'(){const _0x23ba95=_0x48c8,_0x3295dc=document[_0x23ba95(0x13e)](_0x23ba95(0x176));_0x3295dc[_0x23ba95(0x19f)][_0x23ba95(0x13a)](_0x23ba95(0x177)),this[_0x23ba95(0x10c)](_0x3295dc),this[_0x23ba95(0x196)][_0x23ba95(0x16f)](_0x3295dc);const _0x2c33ed=this[_0x23ba95(0xcb)]();_0x2c33ed[_0x23ba95(0x117)](_0x3143a9=>{const _0x438f28=_0x23ba95;_0x3143a9[_0x438f28(0x152)]===_0x438f28(0x172)?this[_0x438f28(0xe9)]():this['createButton'](_0x3143a9);});},'createDivider'(){const _0x256c6c=_0x48c8,_0x25af92=document[_0x256c6c(0x13e)](_0x256c6c(0x176));_0x25af92[_0x256c6c(0x19f)][_0x256c6c(0x13a)](_0x256c6c(0x172)),_0x25af92[_0x256c6c(0x106)](_0x256c6c(0x191),this['onDragStart'][_0x256c6c(0x171)](this)),this[_0x256c6c(0x196)][_0x256c6c(0x16f)](_0x25af92);},'createButton'(_0x464e5e){const _0x285e7a=_0x48c8,_0x515411=document['createElement']('button');_0x515411['id']=_0x464e5e['id'],_0x515411[_0x285e7a(0x19f)][_0x285e7a(0x13a)](_0x285e7a(0x18c)),_0x515411[_0x285e7a(0x161)]=SVG[_0x464e5e['id']]||'',_0x515411[_0x285e7a(0x14f)]=this['getButtonTitle'](_0x464e5e['id']),_0x515411[_0x285e7a(0x106)](_0x285e7a(0x12e),_0x5eeb5a=>{const _0x82ca50=_0x285e7a;_0x464e5e[_0x82ca50(0x110)][_0x82ca50(0x12b)](this,_0x5eeb5a),this['updateCanvas']();}),this[_0x285e7a(0x196)][_0x285e7a(0x16f)](_0x515411);},'resetNodeColors'(){const _0x2a78df=_0x48c8,_0x25c050=this['getSelectedNodes']();if(_0x25c050[_0x2a78df(0xdd)]>0x0){const _0x5b23a5={'undo':()=>{const _0x4198f3=_0x2a78df;_0x25c050[_0x4198f3(0x117)](_0xfca8e7=>{const _0x559fe3=_0x4198f3;_0xfca8e7[_0x559fe3(0x15e)]=_0xfca8e7['originalColor'],_0xfca8e7['bgcolor']=_0xfca8e7[_0x559fe3(0x155)],_0xfca8e7[_0x559fe3(0x178)]=_0xfca8e7[_0x559fe3(0xf8)],_0xfca8e7[_0x559fe3(0xe5)]=_0xfca8e7[_0x559fe3(0x120)];});},'redo':()=>{const _0x937068=_0x2a78df;_0x25c050[_0x937068(0x117)](_0x51d753=>{const _0x15b247=_0x937068;_0x51d753[_0x15b247(0x189)]=_0x51d753[_0x15b247(0x15e)],_0x51d753[_0x15b247(0x155)]=_0x51d753['bgcolor'],_0x51d753[_0x15b247(0xf8)]=_0x51d753[_0x15b247(0x178)],_0x51d753[_0x15b247(0x120)]=_0x51d753[_0x15b247(0xe5)],_0x51d753[_0x15b247(0x15e)]=undefined,_0x51d753[_0x15b247(0x119)]=undefined,delete _0x51d753[_0x15b247(0x178)],delete _0x51d753[_0x15b247(0xe5)];});}};_0x5b23a5[_0x2a78df(0xcc)](),this['addToUndoStack'](_0x5b23a5),this[_0x2a78df(0x16e)](),this[_0x2a78df(0x112)](_0x25c050);}},'getButtonTitle'(_0x4ef553){const _0xf94c31=_0x48c8,_0x9b852={'alignLeft':_0xf94c31(0xc9),'alignCenterHorizontally':_0xf94c31(0x10b),'alignRight':_0xf94c31(0x15b),'alignTop':_0xf94c31(0x124),'alignCenterVertically':_0xf94c31(0x195),'alignBottom':_0xf94c31(0x13d),'horizontalDistribution':_0xf94c31(0xf7),'verticalDistribution':_0xf94c31(0xd6),'equalWidth':'等宽','equalHeight':'等高','undo':'撤销','redo':'重做','smartAlign':_0xf94c31(0xd7),'treeView':_0xf94c31(0x101),'reset':_0xf94c31(0x19a)};return _0x9b852[_0x4ef553]||'';},'getButtons'(){const _0x2e2efb=_0x48c8;return[{'id':_0x2e2efb(0x103),'action':this['alignLeft']},{'id':_0x2e2efb(0xfc),'action':this[_0x2e2efb(0xfc)]},{'id':_0x2e2efb(0xd8),'action':this[_0x2e2efb(0xd8)]},{'id':_0x2e2efb(0x174),'action':this['alignTop']},{'id':_0x2e2efb(0x182),'action':this[_0x2e2efb(0x182)]},{'id':_0x2e2efb(0x11c),'action':this[_0x2e2efb(0x11c)]},{'id':'horizontalDistribution','action':this[_0x2e2efb(0x165)]},{'id':_0x2e2efb(0x173),'action':this[_0x2e2efb(0x173)]},{'id':_0x2e2efb(0x127),'action':this['equalWidth']},{'id':_0x2e2efb(0x129),'action':this[_0x2e2efb(0x129)]},{'id':_0x2e2efb(0xfa),'action':this[_0x2e2efb(0xfa)]},{'id':_0x2e2efb(0xcc),'action':this[_0x2e2efb(0xcc)]},{'id':_0x2e2efb(0x149),'action':this[_0x2e2efb(0x149)]},{'id':_0x2e2efb(0x187),'action':this[_0x2e2efb(0x187)]},{'id':_0x2e2efb(0xde),'action':this[_0x2e2efb(0x126)][_0x2e2efb(0x171)](this)}];},'toggleMode'(){const _0x348f0b=_0x48c8;this[_0x348f0b(0xe0)]=!this[_0x348f0b(0xe0)],localStorage[_0x348f0b(0x150)]('NodeAlignerIsPermanent',this['isPermanent']?'1':'0'),this[_0x348f0b(0x14e)](),!this['isPermanent']&&this[_0x348f0b(0xef)]();},'updateToggleButton'(){const _0xf083dd=_0x48c8,_0x4e50e8=document[_0xf083dd(0x167)](_0xf083dd(0x135));_0x4e50e8&&(_0x4e50e8[_0xf083dd(0x19f)][_0xf083dd(0x14d)](_0xf083dd(0x180),this[_0xf083dd(0xe0)]),_0x4e50e8[_0xf083dd(0x14f)]=this['isPermanent']?'Show\x20on\x20selection':_0xf083dd(0x10f));},'createTooltip'(){const _0x4f2bea=_0x48c8,_0x723eb6=document[_0x4f2bea(0x13e)]('div');_0x723eb6['id']='tooltip',this[_0x4f2bea(0x196)][_0x4f2bea(0x16f)](_0x723eb6),!this[_0x4f2bea(0x163)]&&(this[_0x4f2bea(0x196)]['addEventListener']('mouseenter',()=>{const _0x3f7f5f=_0x4f2bea;!this[_0x3f7f5f(0x163)]&&setTimeout(()=>{const _0x550f7e=_0x3f7f5f;_0x723eb6[_0x550f7e(0x116)][_0x550f7e(0xc8)]=_0x550f7e(0x18d),this[_0x550f7e(0x163)]=!![];},0x3e8);}),this[_0x4f2bea(0x196)]['addEventListener'](_0x4f2bea(0x118),()=>{_0x723eb6['remove']();}));},'setInitialVisibility'(){const _0x542ff4=_0x48c8;let _0x4a817d=localStorage['getItem']('NodeAlignerIsPermanent');_0x4a817d!==null&&(this['isPermanent']=_0x4a817d==='1'),this[_0x542ff4(0xe0)]?this[_0x542ff4(0x194)]():this['hide'](),this[_0x542ff4(0x14e)]();},'show'(){const _0x5d2de2=_0x48c8;this['buttonContainer']['style']['display']=_0x5d2de2(0xf1);},'hide'(){const _0x5325a4=_0x48c8;this[_0x5325a4(0x196)]['style'][_0x5325a4(0xc8)]=_0x5325a4(0x114);},'setPosition'(_0x32dd5f,_0x450af9){const _0x5ef1dd=_0x48c8,_0x517d72=this[_0x5ef1dd(0x196)][_0x5ef1dd(0x142)](),_0xcab732=window[_0x5ef1dd(0x192)],_0x2dd87c=window[_0x5ef1dd(0x162)];_0x32dd5f+_0x517d72[_0x5ef1dd(0xee)]>_0xcab732&&(_0x32dd5f=_0xcab732-_0x517d72[_0x5ef1dd(0xee)]),_0x32dd5f<0x0&&(_0x32dd5f=0x0),_0x450af9+_0x517d72[_0x5ef1dd(0x15d)]>_0x2dd87c&&(_0x450af9=_0x2dd87c-_0x517d72['height']),_0x450af9<0x0&&(_0x450af9=0x0),this['buttonContainer'][_0x5ef1dd(0x116)][_0x5ef1dd(0x199)]=_0x32dd5f+'px',this[_0x5ef1dd(0x196)][_0x5ef1dd(0x116)][_0x5ef1dd(0x185)]=_0x450af9+'px';},'onDragStart'(_0x1619b6){const _0x2093b1=_0x48c8;if(_0x1619b6['button']!==0x0)return;_0x1619b6[_0x2093b1(0xd5)](),this[_0x2093b1(0x109)]=!![],this[_0x2093b1(0xdb)]=_0x1619b6[_0x2093b1(0x14a)]-this[_0x2093b1(0x196)][_0x2093b1(0x11e)],this[_0x2093b1(0xeb)]=_0x1619b6[_0x2093b1(0xf3)]-this[_0x2093b1(0x196)][_0x2093b1(0x183)];},'onDragging'(_0x2102b4){const _0x59f8bd=_0x48c8;if(!this[_0x59f8bd(0x109)])return;_0x2102b4[_0x59f8bd(0x158)](),_0x2102b4[_0x59f8bd(0xd5)]();const _0x105326=_0x2102b4[_0x59f8bd(0x14a)]-this['dragStartX'],_0x5a517c=_0x2102b4[_0x59f8bd(0xf3)]-this[_0x59f8bd(0xeb)];this['buttonContainer'][_0x59f8bd(0x116)][_0x59f8bd(0x199)]=_0x105326+'px',this[_0x59f8bd(0x196)][_0x59f8bd(0x116)][_0x59f8bd(0x185)]=_0x5a517c+'px';},'onDragEnd'(_0x53de9f){const _0x26613a=_0x48c8;if(!this['isDragging'])return;if(_0x53de9f[_0x26613a(0xd9)]!==0x0)return;_0x53de9f['stopPropagation'](),this['isDragging']=![];const _0x1b60c1={'left':this[_0x26613a(0x196)]['style'][_0x26613a(0x199)],'top':this['buttonContainer'][_0x26613a(0x116)][_0x26613a(0x185)]};localStorage['setItem'](_0x26613a(0x140),JSON[_0x26613a(0x15c)](_0x1b60c1));},'restorePosition'(){const _0x363134=_0x48c8,_0x451dd4=JSON[_0x363134(0x188)](localStorage[_0x363134(0xd1)]('NodeAlignerButtonPosition'));_0x451dd4?(this[_0x363134(0x196)][_0x363134(0x116)][_0x363134(0x199)]=_0x451dd4[_0x363134(0x199)],this[_0x363134(0x196)][_0x363134(0x116)][_0x363134(0x185)]=_0x451dd4[_0x363134(0x185)]):(this[_0x363134(0x196)][_0x363134(0x116)][_0x363134(0x199)]=_0x363134(0x175),this['buttonContainer'][_0x363134(0x116)][_0x363134(0x185)]=_0x363134(0x175));},'getSelectedNodes'(){const _0x42b9f6=_0x48c8;if(!LGraphCanvas[_0x42b9f6(0x12f)])return[];const _0x27824f=LGraphCanvas[_0x42b9f6(0x12f)][_0x42b9f6(0xdf)];return _0x27824f?Object[_0x42b9f6(0x121)](_0x27824f):[];},'updateColorPickers'(_0x5a9eae){const _0x31cae0=_0x48c8;if(!_0x5a9eae||_0x5a9eae[_0x31cae0(0xdd)]===0x0)return;const _0x6239a6=_0x5a9eae[0x0];if(!_0x6239a6)return;this[_0x31cae0(0x10a)]=!![];try{if(this[_0x31cae0(0xd0)]){const _0x2378eb=_0x6239a6[_0x31cae0(0x15e)]||_0x31cae0(0x13f);this[_0x31cae0(0xd0)]['value']!==_0x2378eb&&(this[_0x31cae0(0xd0)][_0x31cae0(0x16a)]=_0x2378eb);}if(this[_0x31cae0(0x10e)]){const _0x40f885=_0x6239a6[_0x31cae0(0x119)]||_0x31cae0(0x139);this[_0x31cae0(0x10e)][_0x31cae0(0x16a)]!==_0x40f885&&(this[_0x31cae0(0x10e)][_0x31cae0(0x16a)]=_0x40f885);}}finally{this[_0x31cae0(0x10a)]=![];}},'groupNodesByCoordinate'(_0x5124f3,_0x4a957f,_0x4808d5=0x64){const _0x26cd97=_0x48c8,_0x5053e3=[];return _0x5124f3[_0x26cd97(0x117)](_0x26f8d5=>{const _0x1d839b=_0x26cd97;let _0x328324=_0x5053e3[_0x1d839b(0x10d)](_0x48abe9=>Math[_0x1d839b(0x198)](_0x48abe9[0x0]['pos'][_0x4a957f]-_0x26f8d5[_0x1d839b(0xc6)][_0x4a957f])<=_0x4808d5);_0x328324?_0x328324['push'](_0x26f8d5):_0x5053e3[_0x1d839b(0x18a)]([_0x26f8d5]);}),_0x5053e3;},'alignLeft'(){const _0x521aad=_0x48c8,_0x284311=this[_0x521aad(0x15f)]();if(_0x284311['length']>0x0){const _0x4716ae=Math['min'](..._0x284311['map'](_0x280c4c=>_0x280c4c[_0x521aad(0xc6)][0x0])),_0x26a4de={'undo':()=>{const _0x732546=_0x521aad;_0x284311[_0x732546(0x117)](_0x54c2b8=>{_0x54c2b8['pos'][0x0]=_0x54c2b8['originalX'];});},'redo':()=>{const _0x5b795b=_0x521aad;_0x284311[_0x5b795b(0x117)](_0x3c7df8=>{const _0xfc2ad7=_0x5b795b;_0x3c7df8[_0xfc2ad7(0x141)]=_0x3c7df8[_0xfc2ad7(0xc6)][0x0],_0x3c7df8['pos'][0x0]=_0x4716ae;});}};_0x26a4de[_0x521aad(0xcc)](),this[_0x521aad(0x136)](_0x26a4de),this['updateCanvas']();}},'alignRight'(){const _0x4bfa08=_0x48c8,_0x2d851d=this[_0x4bfa08(0x15f)]();if(_0x2d851d[_0x4bfa08(0xdd)]>0x0){const _0x3f42aa=Math[_0x4bfa08(0xe8)](..._0x2d851d['map'](_0x222a63=>_0x222a63['pos'][0x0]+_0x222a63[_0x4bfa08(0xf4)][0x0])),_0xee505c={'undo':()=>{const _0x5f7b1e=_0x4bfa08;_0x2d851d[_0x5f7b1e(0x117)](_0x241aed=>{const _0xd9e1cc=_0x5f7b1e;_0x241aed[_0xd9e1cc(0xc6)][0x0]=_0x241aed[_0xd9e1cc(0x141)];});},'redo':()=>{const _0x45117a=_0x4bfa08;_0x2d851d[_0x45117a(0x117)](_0x24f358=>{const _0x197b22=_0x45117a;_0x24f358[_0x197b22(0x141)]=_0x24f358[_0x197b22(0xc6)][0x0],_0x24f358[_0x197b22(0xc6)][0x0]=_0x3f42aa-_0x24f358[_0x197b22(0xf4)][0x0];});}};_0xee505c['redo'](),this[_0x4bfa08(0x136)](_0xee505c),this[_0x4bfa08(0x16e)]();}},'alignTop'(){const _0x59a75d=_0x48c8,_0x4805d3=this[_0x59a75d(0x15f)]();if(_0x4805d3['length']>0x0){const _0x5cd528=Math[_0x59a75d(0x19d)](..._0x4805d3[_0x59a75d(0xcf)](_0xef1055=>_0xef1055['pos'][0x1])),_0x37fc21={'undo':()=>{const _0x59f6c8=_0x59a75d;_0x4805d3[_0x59f6c8(0x117)](_0x3e449e=>{const _0x5c53a1=_0x59f6c8;_0x3e449e[_0x5c53a1(0xc6)][0x1]=_0x3e449e['originalY'];});},'redo':()=>{const _0x20234c=_0x59a75d;_0x4805d3[_0x20234c(0x117)](_0x1eff22=>{const _0x252d23=_0x20234c;_0x1eff22['originalY']=_0x1eff22[_0x252d23(0xc6)][0x1],_0x1eff22[_0x252d23(0xc6)][0x1]=_0x5cd528;});}};_0x37fc21['redo'](),this[_0x59a75d(0x136)](_0x37fc21),this['updateCanvas']();}},'alignBottom'(){const _0x55e5c1=_0x48c8,_0x5bd776=this[_0x55e5c1(0x15f)]();if(_0x5bd776[_0x55e5c1(0xdd)]>0x0){const _0x3f5b8d=Math[_0x55e5c1(0xe8)](..._0x5bd776[_0x55e5c1(0xcf)](_0x4a1389=>_0x4a1389['pos'][0x1]+_0x4a1389['size'][0x1])),_0xc89574={'undo':()=>{const _0x57f8fe=_0x55e5c1;_0x5bd776[_0x57f8fe(0x117)](_0x258fb1=>{const _0x319abd=_0x57f8fe;_0x258fb1['pos'][0x1]=_0x258fb1[_0x319abd(0x100)];});},'redo':()=>{const _0x5d53de=_0x55e5c1;_0x5bd776[_0x5d53de(0x117)](_0x19c115=>{const _0x4d7dee=_0x5d53de;_0x19c115[_0x4d7dee(0x100)]=_0x19c115[_0x4d7dee(0xc6)][0x1],_0x19c115[_0x4d7dee(0xc6)][0x1]=_0x3f5b8d-_0x19c115[_0x4d7dee(0xf4)][0x1];});}};_0xc89574[_0x55e5c1(0xcc)](),this['addToUndoStack'](_0xc89574),this['updateCanvas']();}},'alignCenterHorizontally'(){const _0x2ad234=_0x48c8,_0x3523fa=this[_0x2ad234(0x15f)]();if(_0x3523fa[_0x2ad234(0xdd)]>0x0){const _0x18c6f8=this[_0x2ad234(0x16d)](_0x3523fa,0x1),_0x502f9b={'undo':()=>{const _0x42325f=_0x2ad234;_0x3523fa[_0x42325f(0x117)](_0x43132c=>{const _0x1fb0a6=_0x42325f;_0x43132c[_0x1fb0a6(0xc6)][0x1]=_0x43132c[_0x1fb0a6(0x100)];});},'redo':()=>{_0x3523fa['forEach'](_0x23517d=>{const _0x100d2d=_0x48c8;_0x23517d[_0x100d2d(0x100)]=_0x23517d['pos'][0x1],_0x23517d[_0x100d2d(0xc6)][0x1]=_0x18c6f8-_0x23517d['size'][0x1]/0x2;});}};_0x502f9b[_0x2ad234(0xcc)](),this['addToUndoStack'](_0x502f9b),this['updateCanvas']();}},'alignCenterVertically'(){const _0x39032a=_0x48c8,_0x3cb122=this['getSelectedNodes']();if(_0x3cb122[_0x39032a(0xdd)]>0x0){const _0x4c5ed9=this['calculateCenterInGroup'](_0x3cb122,0x0),_0x409660={'undo':()=>{_0x3cb122['forEach'](_0x2b9aea=>{const _0x14f7c7=_0x48c8;_0x2b9aea[_0x14f7c7(0xc6)][0x0]=_0x2b9aea[_0x14f7c7(0x141)];});},'redo':()=>{const _0x2c6cbb=_0x39032a;_0x3cb122[_0x2c6cbb(0x117)](_0x29107a=>{const _0x5addb5=_0x2c6cbb;_0x29107a['originalX']=_0x29107a[_0x5addb5(0xc6)][0x0],_0x29107a['pos'][0x0]=_0x4c5ed9-_0x29107a[_0x5addb5(0xf4)][0x0]/0x2;});}};_0x409660[_0x39032a(0xcc)](),this[_0x39032a(0x136)](_0x409660),this[_0x39032a(0x16e)]();}},'calculateCenterInGroup'(_0x5d2a0d,_0x1f6413){const _0x4dcb30=_0x48c8,_0x266c59=Math[_0x4dcb30(0x19d)](..._0x5d2a0d['map'](_0x159352=>_0x159352['pos'][_0x1f6413])),_0x1ac7b7=Math[_0x4dcb30(0xe8)](..._0x5d2a0d[_0x4dcb30(0xcf)](_0xe03981=>_0xe03981[_0x4dcb30(0xc6)][_0x1f6413]+_0xe03981[_0x4dcb30(0xf4)][_0x1f6413]));return(_0x266c59+_0x1ac7b7)/0x2;},'horizontalDistribution'(){const _0x214c3a=_0x48c8,_0x162c24=this[_0x214c3a(0x15f)](),_0x145e18=0x0;if(_0x162c24[_0x214c3a(0xdd)]>0x1){_0x162c24[_0x214c3a(0x113)]((_0x156303,_0x50cef3)=>_0x156303[_0x214c3a(0xc6)][_0x145e18]-_0x50cef3[_0x214c3a(0xc6)][_0x145e18]);const _0x3f423a=Math[_0x214c3a(0x19d)](..._0x162c24['map'](_0xdc9db4=>_0xdc9db4[_0x214c3a(0xc6)][_0x145e18])),_0x44b58a=Math[_0x214c3a(0xe8)](..._0x162c24['map'](_0x272cab=>_0x272cab[_0x214c3a(0xc6)][_0x145e18]+_0x272cab[_0x214c3a(0xf4)][_0x145e18])),_0x520edf=_0x162c24['reduce']((_0x444335,_0x5d0005)=>_0x444335+_0x5d0005['size'][_0x145e18],0x0),_0x37073d=(_0x44b58a-_0x3f423a-_0x520edf)/(_0x162c24['length']-0x1),_0x499ea3={'undo':()=>{const _0x2dd9d7=_0x214c3a;_0x162c24[_0x2dd9d7(0x117)](_0x3796ea=>{const _0x2a26d1=_0x2dd9d7;_0x3796ea[_0x2a26d1(0xc6)][_0x145e18]=_0x3796ea['originalPos'];});},'redo':()=>{const _0x4bfa8c=_0x214c3a;let _0x44e67e=_0x3f423a;_0x162c24[_0x4bfa8c(0x117)](_0x1983ec=>{const _0x9436f4=_0x4bfa8c;_0x1983ec[_0x9436f4(0x1a1)]=_0x1983ec[_0x9436f4(0xc6)][_0x145e18],_0x1983ec['pos'][_0x145e18]=_0x44e67e,_0x44e67e+=_0x1983ec[_0x9436f4(0xf4)][_0x145e18]+_0x37073d;});}};_0x499ea3['redo'](),this[_0x214c3a(0x136)](_0x499ea3),this[_0x214c3a(0x16e)]();}},'verticalDistribution'(){const _0x572e3e=_0x48c8,_0x200ea0=this[_0x572e3e(0x15f)]();if(_0x200ea0['length']>0x1){const _0x5c0d00=0x1,_0x44a32b=0x0,_0x356bfb=0x64,_0x393dd1=0x14,_0xe2bf4f=[];_0x200ea0['forEach'](_0x22ab0f=>{const _0x14919b=_0x572e3e;let _0x369ce6=null;for(let _0x33bf5e of _0xe2bf4f){const _0x44a9c7=_0x33bf5e[0x0][_0x14919b(0xc6)][_0x44a32b];if(Math['abs'](_0x44a9c7-_0x22ab0f[_0x14919b(0xc6)][_0x44a32b])<=_0x356bfb){_0x369ce6=_0x33bf5e;break;}}_0x369ce6?_0x369ce6[_0x14919b(0x18a)](_0x22ab0f):_0xe2bf4f[_0x14919b(0x18a)]([_0x22ab0f]);});const _0x14ca3b=_0xe2bf4f[_0x572e3e(0xcf)](_0x35b978=>{const _0x599f8a=_0x572e3e,_0x2c04a1=Math[_0x599f8a(0x19d)](..._0x35b978['map'](_0x59f292=>_0x59f292[_0x599f8a(0xc6)][_0x5c0d00])),_0x2def8b=Math[_0x599f8a(0xe8)](..._0x35b978[_0x599f8a(0xcf)](_0x46f29d=>_0x46f29d['pos'][_0x5c0d00]+_0x46f29d[_0x599f8a(0xf4)][_0x5c0d00]));return _0x2def8b-_0x2c04a1;}),_0x4fbe04=Math[_0x572e3e(0xe8)](..._0x14ca3b),_0x26007b=Math['min'](..._0xe2bf4f[_0x572e3e(0xcf)](_0x4c20c1=>_0x4c20c1[0x0][_0x572e3e(0xc6)][_0x5c0d00])),_0x202936={'undo':()=>{const _0x1cff1d=_0x572e3e;_0x200ea0[_0x1cff1d(0x117)](_0x174627=>{const _0x1ca2af=_0x1cff1d;_0x174627['pos'][_0x5c0d00]=_0x174627[_0x1ca2af(0x1a1)],_0x174627[_0x1ca2af(0xc6)][_0x44a32b]=_0x174627[_0x1ca2af(0x107)];});},'redo':()=>{const _0x36b792=_0x572e3e;_0xe2bf4f[_0x36b792(0x117)]((_0x4167a9,_0x13b270)=>{const _0x20efc6=_0x36b792;if(_0x4167a9[_0x20efc6(0xdd)]>0x1){_0x4167a9[_0x20efc6(0x113)]((_0x175bde,_0x2d0075)=>_0x175bde[_0x20efc6(0xc6)][_0x5c0d00]-_0x2d0075['pos'][_0x5c0d00]);const _0x24f35a=_0x4167a9[_0x20efc6(0x168)]((_0x9fa044,_0x3ab0a6)=>_0x9fa044+_0x3ab0a6['size'][_0x5c0d00],0x0);let _0x153c37=(_0x4fbe04-_0x24f35a)/(_0x4167a9['length']-0x1);_0x153c37=Math[_0x20efc6(0xe8)](_0x153c37,_0x393dd1);let _0x58d651=_0x26007b;_0x4167a9[_0x20efc6(0x117)]((_0x4628c3,_0x48417d)=>{const _0x309554=_0x20efc6;_0x4628c3[_0x309554(0x1a1)]=_0x4628c3['pos'][_0x5c0d00],_0x4628c3['originalOtherPos']=_0x4628c3[_0x309554(0xc6)][_0x44a32b],_0x4628c3['pos'][_0x5c0d00]=_0x58d651,_0x58d651+=_0x4628c3[_0x309554(0xf4)][_0x5c0d00]+_0x153c37,_0x4628c3[_0x309554(0xc6)][_0x44a32b]=_0x4167a9[0x0]['pos'][_0x44a32b];});}else{if(_0x4167a9['length']===0x1){const _0x3bf327=_0x4167a9[0x0];_0x3bf327[_0x20efc6(0x1a1)]=_0x3bf327[_0x20efc6(0xc6)][_0x5c0d00],_0x3bf327[_0x20efc6(0xc6)][_0x5c0d00]=_0x26007b;}}});}};_0x202936[_0x572e3e(0xcc)](),this[_0x572e3e(0x136)](_0x202936),this[_0x572e3e(0x16e)]();}},'equalWidth'(){const _0xe0245c=_0x48c8;this[_0xe0245c(0x133)](0x0);},'equalHeight'(){const _0x17386c=_0x48c8;this[_0x17386c(0x133)](0x1);},'equalSize'(_0x36d588){const _0x5675e9=_0x48c8,_0x5350f7=this['getSelectedNodes']();if(_0x5350f7['length']>0x0){const _0x162a20=Math[_0x5675e9(0xe8)](..._0x5350f7[_0x5675e9(0xcf)](_0x380a95=>_0x380a95['size'][_0x36d588])),_0x376d38={'undo':()=>{const _0x422854=_0x5675e9;_0x5350f7[_0x422854(0x117)](_0x255c72=>{const _0xdb05fa=_0x422854;_0x255c72['size'][_0x36d588]=_0x255c72[_0xdb05fa(0x19c)];});},'redo':()=>{const _0x27136c=_0x5675e9;_0x5350f7[_0x27136c(0x117)](_0x1431a1=>{const _0x33ebf8=_0x27136c;_0x1431a1[_0x33ebf8(0x19c)]=_0x1431a1[_0x33ebf8(0xf4)][_0x36d588],_0x1431a1[_0x33ebf8(0xf4)][_0x36d588]=_0x162a20;});}};_0x376d38[_0x5675e9(0xcc)](),this[_0x5675e9(0x136)](_0x376d38),this[_0x5675e9(0x16e)]();}},'showTooltip'(){const _0x5247a4=_0x48c8;if(this['hasShownTooltip'])return;const _0x3e70c3=document[_0x5247a4(0x167)](_0x5247a4(0x19b));_0x3e70c3['style']['display']=_0x5247a4(0x18d),setTimeout(()=>{const _0x1239a4=_0x5247a4;_0x3e70c3[_0x1239a4(0x116)]['opacity']='1';},0xa),this[_0x5247a4(0x163)]=!![];},'hideTooltip'(){const _0x2ab07e=_0x48c8,_0x4282ae=document['getElementById'](_0x2ab07e(0x19b));_0x4282ae[_0x2ab07e(0x116)]['opacity']='0',setTimeout(()=>{const _0x3afc95=_0x2ab07e;_0x4282ae[_0x3afc95(0x116)][_0x3afc95(0xc8)]=_0x3afc95(0x114);},0x12c);},'smartAlign'(){const _0x613ffa=_0x48c8,_0x2407ea=this[_0x613ffa(0x15f)]();if(_0x2407ea[_0x613ffa(0xdd)]<0x2)return;const _0x5687c7={'undo':()=>_0x2407ea[_0x613ffa(0x117)](_0x4a4f18=>{const _0x394120=_0x613ffa;[_0x4a4f18[_0x394120(0xc6)][0x0],_0x4a4f18['pos'][0x1]]=[_0x4a4f18[_0x394120(0x141)],_0x4a4f18['originalY']];}),'redo':()=>{const _0x1b8a24=_0x613ffa,_0x3f19f3=this['getNodesBounds'](_0x2407ea),[_0x2e42f8,_0x5b440a]=[0x32,0x32],_0x57591b=Math[_0x1b8a24(0x19d)](0x7d0,_0x3f19f3[_0x1b8a24(0xee)]*1.5),_0x3fd15d=_0x2407ea[_0x1b8a24(0xe4)](_0x3b5b93=>!_0x3b5b93[_0x1b8a24(0x169)]||_0x3b5b93[_0x1b8a24(0x169)]['length']===0x0),_0x135a5f=_0x2407ea[_0x1b8a24(0xe4)](_0x36c008=>!_0x36c008[_0x1b8a24(0xd2)]||_0x36c008[_0x1b8a24(0xd2)]['length']===0x0);let _0x53cda0=_0x2407ea[_0x1b8a24(0xe4)](_0x371853=>_0x371853[_0x1b8a24(0x169)]&&_0x371853[_0x1b8a24(0x169)][_0x1b8a24(0xdd)]>0x0&&(_0x371853['outputs']&&_0x371853[_0x1b8a24(0xd2)][_0x1b8a24(0xdd)]>0x0));const _0x534b48=this[_0x1b8a24(0x157)](_0x53cda0,_0x3fd15d,_0x135a5f);_0x53cda0=_0x53cda0['filter'](_0x5ca39a=>!_0x534b48[_0x1b8a24(0x123)](_0x5ca39a));const _0x2fe2ed=this[_0x1b8a24(0x108)]([..._0x53cda0,..._0x534b48]);_0x53cda0[_0x1b8a24(0x113)]((_0x3a0fe7,_0x4ea156)=>_0x2fe2ed['indexOf'](_0x3a0fe7)-_0x2fe2ed['indexOf'](_0x4ea156)),[_0x3fd15d,_0x53cda0,_0x135a5f,_0x534b48]['forEach'](_0x4a946c=>_0x4a946c['sort']((_0x36e88a,_0x5e7ccf)=>_0x36e88a[_0x1b8a24(0xc6)][0x1]-_0x5e7ccf[_0x1b8a24(0xc6)][0x1]));let _0x3b9bae=_0x3f19f3[_0x1b8a24(0x185)];_0x3fd15d[_0x1b8a24(0x117)](_0x223c60=>{const _0x2348c5=_0x1b8a24;[_0x223c60['originalX'],_0x223c60[_0x2348c5(0x100)]]=_0x223c60['pos'],_0x223c60[_0x2348c5(0xc6)][0x0]=_0x3f19f3['left'],_0x223c60['pos'][0x1]=_0x3b9bae,_0x3b9bae+=_0x223c60[_0x2348c5(0xf4)][0x1]+_0x5b440a;});let [_0x17244e,_0x399f9c]=[_0x3f19f3[_0x1b8a24(0x199)]+this[_0x1b8a24(0x131)](_0x3fd15d)+_0x2e42f8,0x0];_0x3b9bae=_0x3f19f3[_0x1b8a24(0x185)],_0x53cda0[_0x1b8a24(0x117)](_0x417646=>{const _0x4c074c=_0x1b8a24;[_0x417646[_0x4c074c(0x141)],_0x417646[_0x4c074c(0x100)]]=_0x417646[_0x4c074c(0xc6)],_0x17244e+_0x417646[_0x4c074c(0xf4)][0x0]>_0x3f19f3[_0x4c074c(0x199)]+_0x57591b&&(_0x17244e=_0x3f19f3['left']+this[_0x4c074c(0x131)](_0x3fd15d)+_0x2e42f8,_0x3b9bae+=_0x399f9c+_0x5b440a,_0x399f9c=0x0),_0x417646[_0x4c074c(0xc6)][0x0]=_0x17244e,_0x417646[_0x4c074c(0xc6)][0x1]=_0x3b9bae,_0x17244e+=_0x417646['size'][0x0]+_0x2e42f8,_0x399f9c=Math[_0x4c074c(0xe8)](_0x399f9c,_0x417646[_0x4c074c(0xf4)][0x1]);});const _0x4e1f19=_0x17244e;_0x534b48[_0x1b8a24(0x117)](_0x4dba07=>{const _0x2d76bf=_0x1b8a24;[_0x4dba07[_0x2d76bf(0x141)],_0x4dba07[_0x2d76bf(0x100)]]=_0x4dba07[_0x2d76bf(0xc6)],_0x4dba07[_0x2d76bf(0xc6)][0x0]=_0x4e1f19,_0x4dba07['pos'][0x1]=_0x3b9bae,_0x3b9bae+=_0x4dba07[_0x2d76bf(0xf4)][0x1]+_0x5b440a;}),_0x3b9bae=_0x3f19f3['top'];const _0xe36a46=_0x3f19f3[_0x1b8a24(0x199)]+_0x57591b;_0x135a5f[_0x1b8a24(0x117)](_0x1e8dfc=>{const _0x360552=_0x1b8a24;[_0x1e8dfc[_0x360552(0x141)],_0x1e8dfc[_0x360552(0x100)]]=_0x1e8dfc['pos'],_0x1e8dfc[_0x360552(0xc6)][0x0]=_0xe36a46-_0x1e8dfc['size'][0x0],_0x1e8dfc[_0x360552(0xc6)][0x1]=_0x3b9bae,_0x3b9bae+=_0x1e8dfc['size'][0x1]+_0x5b440a;});}};_0x5687c7[_0x613ffa(0xcc)](),this['addToUndoStack'](_0x5687c7),this[_0x613ffa(0x16e)]();},'detectDoubleLinkNodes'(_0x1d04b8,_0x8a1292,_0x2833f5){return _0x1d04b8['filter'](_0x1ea8e0=>{const _0x2317b0=_0x48c8,_0x31d784=_0x1ea8e0['inputs'][_0x2317b0(0x164)](_0xbb02b4=>_0xbb02b4[_0x2317b0(0xf5)]!==null&&_0x8a1292[_0x2317b0(0x164)](_0x4b57b8=>_0x4b57b8[_0x2317b0(0xd2)]&&_0x4b57b8['outputs'][_0x2317b0(0x164)](_0x446d1a=>_0x446d1a[_0x2317b0(0x102)]&&_0x446d1a[_0x2317b0(0x102)]['includes'](_0xbb02b4[_0x2317b0(0xf5)])))),_0x3de122=_0x1ea8e0[_0x2317b0(0x169)]['some'](_0x1aa09f=>_0x1aa09f[_0x2317b0(0xf5)]!==null&&_0x2833f5['some'](_0x32ec8b=>_0x32ec8b[_0x2317b0(0xd2)]&&_0x32ec8b[_0x2317b0(0xd2)][_0x2317b0(0x164)](_0xbddd7=>_0xbddd7[_0x2317b0(0x102)]&&_0xbddd7['links'][_0x2317b0(0x123)](_0x1aa09f['link']))));return _0x31d784&&_0x3de122;});},'analyzeConnections'(_0x52b9d5){const _0x35b4f6=_0x48c8,_0x205002={};_0x52b9d5['forEach'](_0x3524ae=>{_0x205002[_0x3524ae['id']]={'node':_0x3524ae,'inputs':[],'outputs':[]};}),_0x52b9d5['forEach'](_0x5ab81e=>{const _0x57ad42=_0x48c8;_0x5ab81e[_0x57ad42(0x169)]&&_0x5ab81e['inputs'][_0x57ad42(0x117)](_0x5771c1=>{const _0x2e4b6d=_0x57ad42;if(_0x5771c1['link']!==null){const _0x501b82=_0x52b9d5[_0x2e4b6d(0x10d)](_0x53554c=>_0x53554c['outputs']&&_0x53554c[_0x2e4b6d(0xd2)]['some'](_0x2a9c48=>_0x2a9c48[_0x2e4b6d(0x102)]&&_0x2a9c48[_0x2e4b6d(0x102)][_0x2e4b6d(0x123)](_0x5771c1['link'])));_0x501b82&&(_0x205002[_0x5ab81e['id']][_0x2e4b6d(0x169)][_0x2e4b6d(0x18a)](_0x501b82['id']),_0x205002[_0x501b82['id']][_0x2e4b6d(0xd2)][_0x2e4b6d(0x18a)](_0x5ab81e['id']));}});});const _0x23df70=new Set(),_0x4a43f8=[];function _0x26ab66(_0x3e16f4){const _0x16b41e=_0x48c8;if(_0x23df70['has'](_0x3e16f4))return;_0x23df70[_0x16b41e(0x13a)](_0x3e16f4),_0x205002[_0x3e16f4][_0x16b41e(0x169)][_0x16b41e(0x117)](_0x26ab66),_0x4a43f8['push'](_0x205002[_0x3e16f4][_0x16b41e(0x104)]);}return Object[_0x35b4f6(0x12c)](_0x205002)[_0x35b4f6(0x117)](_0x26ab66),_0x4a43f8;},'getMaxWidth'(_0x29ec5b){const _0x20310f=_0x48c8;return _0x29ec5b[_0x20310f(0xdd)]>0x0?Math[_0x20310f(0xe8)](..._0x29ec5b[_0x20310f(0xcf)](_0x423509=>_0x423509[_0x20310f(0xf4)][0x0])):0x0;},'getNodesBounds'(_0x55c65a){const _0x3b4a65=_0x48c8,_0x16c530=_0x55c65a['map'](_0x13dd01=>_0x13dd01[_0x3b4a65(0xc6)][0x0]),_0x2bf02b=_0x55c65a[_0x3b4a65(0xcf)](_0xb34066=>_0xb34066[_0x3b4a65(0xc6)][0x1]),_0x3dfe8f=_0x55c65a[_0x3b4a65(0xcf)](_0x35b200=>_0x35b200[_0x3b4a65(0xc6)][0x0]+_0x35b200[_0x3b4a65(0xf4)][0x0]),_0x209910=_0x55c65a[_0x3b4a65(0xcf)](_0x19f6bf=>_0x19f6bf[_0x3b4a65(0xc6)][0x1]+_0x19f6bf[_0x3b4a65(0xf4)][0x1]);return{'left':Math[_0x3b4a65(0x19d)](..._0x16c530),'top':Math[_0x3b4a65(0x19d)](..._0x2bf02b),'right':Math[_0x3b4a65(0xe8)](..._0x3dfe8f),'bottom':Math[_0x3b4a65(0xe8)](..._0x209910),'width':Math[_0x3b4a65(0xe8)](..._0x3dfe8f)-Math['min'](..._0x16c530),'height':Math[_0x3b4a65(0xe8)](..._0x209910)-Math['min'](..._0x2bf02b)};},'distributeEvenly'(){const _0x50d490=_0x48c8,_0x4062cd=this[_0x50d490(0x15f)]();if(_0x4062cd[_0x50d490(0xdd)]<0x3)return;const _0xd9c3ee=this[_0x50d490(0x11b)](_0x4062cd),_0x47b854=_0x4062cd[_0x50d490(0x168)]((_0x46623f,_0x1af9cd)=>_0x46623f+_0x1af9cd[_0x50d490(0xf4)][0x0],0x0),_0x21b6b5=(_0xd9c3ee[_0x50d490(0xee)]-_0x47b854)/(_0x4062cd[_0x50d490(0xdd)]-0x1),_0x5945b3={'undo':()=>{const _0x32535c=_0x50d490;_0x4062cd[_0x32535c(0x117)](_0x4a7e7d=>{const _0x28fa68=_0x32535c;_0x4a7e7d[_0x28fa68(0xc6)][0x0]=_0x4a7e7d[_0x28fa68(0x141)];});},'redo':()=>{const _0x241e93=_0x50d490;let _0xcb2148=_0xd9c3ee[_0x241e93(0x199)];_0x4062cd['forEach'](_0x4cf309=>{const _0x5a973e=_0x241e93;_0x4cf309[_0x5a973e(0x141)]=_0x4cf309[_0x5a973e(0xc6)][0x0],_0x4cf309['pos'][0x0]=_0xcb2148,_0xcb2148+=_0x4cf309['size'][0x0]+_0x21b6b5;});}};_0x5945b3[_0x50d490(0xcc)](),this[_0x50d490(0x136)](_0x5945b3),LGraphCanvas[_0x50d490(0x12f)][_0x50d490(0x132)](!![],!![]);},'updateCanvas'(){const _0x4c14ce=_0x48c8;if(LGraphCanvas[_0x4c14ce(0x12f)]){const _0x3aae54=LGraphCanvas[_0x4c14ce(0x12f)],_0xbad247=_0x3aae54['ds']?{..._0x3aae54['ds'][_0x4c14ce(0x138)]}:null,_0x177043=_0x3aae54['ds']?_0x3aae54['ds'][_0x4c14ce(0x17b)]:null;_0x3aae54[_0x4c14ce(0x132)](!![],!![]);const _0x38cc6b=this[_0x4c14ce(0x15f)]();_0x3aae54[_0x4c14ce(0x17e)](_0x38cc6b),_0xbad247&&_0x177043&&(_0x3aae54['ds'][_0x4c14ce(0x138)]=_0xbad247,_0x3aae54['ds'][_0x4c14ce(0x17b)]=_0x177043);}},'groupNodesByCoordinate'(_0x4119f6,_0x348e78,_0x29b89c=0x32){const _0x33aaf2=_0x48c8,_0x140811=[];return _0x4119f6[_0x33aaf2(0x117)](_0x56136f=>{const _0x138ef7=_0x33aaf2;let _0x11f9e4=_0x140811[_0x138ef7(0x10d)](_0xc1e628=>Math[_0x138ef7(0x198)](_0xc1e628[0x0][_0x138ef7(0xc6)][_0x348e78]-_0x56136f[_0x138ef7(0xc6)][_0x348e78])<=_0x29b89c);_0x11f9e4?_0x11f9e4[_0x138ef7(0x18a)](_0x56136f):_0x140811['push']([_0x56136f]);}),_0x140811;},'adjustSpacingBetweenGroups'(_0xab501,_0xa7a042){const _0x5e4a2d=_0x48c8,_0x2fcc6a=_0xa7a042===0x0?0x1:0x0;_0xab501[_0x5e4a2d(0x113)]((_0x109828,_0x282eaa)=>_0x109828[0x0][_0x5e4a2d(0xc6)][_0xa7a042]-_0x282eaa[0x0]['pos'][_0xa7a042]);for(let _0x437079=0x1;_0x437079<_0xab501[_0x5e4a2d(0xdd)];_0x437079++){const _0x545667=_0xab501[_0x437079-0x1],_0x566906=_0xab501[_0x437079],_0x2ceb60=Math[_0x5e4a2d(0xe8)](..._0x545667[_0x5e4a2d(0xcf)](_0x185cc3=>_0x185cc3[_0x5e4a2d(0xc6)][_0xa7a042]+_0x185cc3[_0x5e4a2d(0xf4)][_0xa7a042])),_0x540e18=Math[_0x5e4a2d(0x19d)](..._0x566906[_0x5e4a2d(0xcf)](_0x24fe71=>_0x24fe71['pos'][_0xa7a042])),_0x237d36=0x32,_0x212cb5=_0x2ceb60+_0x237d36-_0x540e18;_0x566906[_0x5e4a2d(0x117)](_0x39c463=>{_0x39c463['pos'][_0xa7a042]+=_0x212cb5;});}},'treeView'(){const _0x36d663=_0x48c8,_0x442911=this[_0x36d663(0x15f)]();if(_0x442911[_0x36d663(0xdd)]<0x2)return;const _0x319a16={'undo':()=>_0x442911[_0x36d663(0x117)](_0x4b716f=>{const _0x20afad=_0x36d663;[_0x4b716f['pos'][0x0],_0x4b716f[_0x20afad(0xc6)][0x1]]=[_0x4b716f[_0x20afad(0x141)],_0x4b716f[_0x20afad(0x100)]];}),'redo':()=>{const _0x34ab4d=_0x36d663,_0x38f8d1=this['findRootNode'](_0x442911);if(!_0x38f8d1)return;const _0x10952d=this[_0x34ab4d(0x145)](_0x38f8d1,_0x442911),_0x4cbfc5=Math[_0x34ab4d(0xe8)](..._0x442911['map'](_0x2f8441=>_0x2f8441[_0x34ab4d(0xf4)][0x0])),_0x32e9b0=Math[_0x34ab4d(0xe8)](..._0x442911[_0x34ab4d(0xcf)](_0x46d30a=>_0x46d30a[_0x34ab4d(0xf4)][0x1])),_0x348f50=_0x4cbfc5*1.5,_0x5a51b2=_0x32e9b0*0x2;_0x10952d['forEach']((_0x204a5f,_0x2998c9)=>{const _0x32c820=_0x34ab4d,_0x472b3e=(_0x204a5f[_0x32c820(0xdd)]-0x1)*_0x348f50,_0x3964f3=_0x38f8d1[_0x32c820(0xc6)][0x0]-_0x472b3e/0x2;_0x204a5f[_0x32c820(0x117)]((_0x190ce2,_0x4d23f9)=>{const _0x1071b3=_0x32c820;[_0x190ce2['originalX'],_0x190ce2[_0x1071b3(0x100)]]=_0x190ce2[_0x1071b3(0xc6)],_0x190ce2['pos'][0x0]=_0x3964f3+_0x4d23f9*_0x348f50,_0x190ce2[_0x1071b3(0xc6)][0x1]=_0x38f8d1[_0x1071b3(0xc6)][0x1]+_0x2998c9*_0x5a51b2;});});}};_0x319a16[_0x36d663(0xcc)](),this['addToUndoStack'](_0x319a16),this['updateCanvas']();},'findRootNode'(_0x56e79e){const _0x7c9d25=_0x48c8;return _0x56e79e['find'](_0x3c1385=>!_0x3c1385[_0x7c9d25(0x169)]||_0x3c1385[_0x7c9d25(0x169)][_0x7c9d25(0x11d)](_0x240a03=>_0x240a03[_0x7c9d25(0xf5)]===null));},'buildSimpleHierarchy'(_0x5e072f,_0x36cbbd){const _0x25b1f3=_0x48c8,_0x47870f=[[_0x5e072f]],_0x2737e1=new Set([_0x5e072f['id']]);let _0x18ad7b=[_0x5e072f];while(_0x18ad7b['length']>0x0){const _0x30c9d7=[];for(const _0x17c978 of _0x18ad7b){const _0xdde112=_0x36cbbd[_0x25b1f3(0xe4)](_0x3d7925=>!_0x2737e1[_0x25b1f3(0x179)](_0x3d7925['id'])&&_0x3d7925[_0x25b1f3(0x169)]&&_0x3d7925[_0x25b1f3(0x169)]['some'](_0x3fdec8=>_0x3fdec8[_0x25b1f3(0xf5)]!==null&&_0x17c978['outputs']&&_0x17c978[_0x25b1f3(0xd2)]['some'](_0x11f404=>_0x11f404['links']&&_0x11f404['links'][_0x25b1f3(0x123)](_0x3fdec8[_0x25b1f3(0xf5)]))));_0xdde112[_0x25b1f3(0x117)](_0x499691=>_0x2737e1['add'](_0x499691['id'])),_0x30c9d7[_0x25b1f3(0x18a)](..._0xdde112);}_0x30c9d7['length']>0x0&&_0x47870f[_0x25b1f3(0x18a)](_0x30c9d7),_0x18ad7b=_0x30c9d7;}return _0x47870f;},'createColorPickers'(){const _0x2ef6f7=_0x48c8,_0x20c480=document[_0x2ef6f7(0x13e)](_0x2ef6f7(0x176));_0x20c480[_0x2ef6f7(0x19f)][_0x2ef6f7(0x13a)](_0x2ef6f7(0x177)),this[_0x2ef6f7(0xd0)]=this[_0x2ef6f7(0xf0)]('node-color-picker',_0x2ef6f7(0x130),this[_0x2ef6f7(0x12d)][_0x2ef6f7(0x171)](this)),this[_0x2ef6f7(0x10e)]=this['createSingleColorPicker'](_0x2ef6f7(0xf9),_0x2ef6f7(0x146),this[_0x2ef6f7(0x144)][_0x2ef6f7(0x171)](this));const _0x1a7bce=document['createElement'](_0x2ef6f7(0x176));_0x1a7bce['classList'][_0x2ef6f7(0x13a)](_0x2ef6f7(0x172));const _0x3f3d8b=document[_0x2ef6f7(0x13e)]('div');_0x3f3d8b['classList']['add']('gradient-picker-container'),this['startColorPicker']=this[_0x2ef6f7(0xf0)](_0x2ef6f7(0x17f),_0x2ef6f7(0x111),this['onGradientColorChange']['bind'](this)),this['gradientDirection']=document[_0x2ef6f7(0x13e)](_0x2ef6f7(0xff)),this[_0x2ef6f7(0xea)]['classList'][_0x2ef6f7(0x13a)]('gradient-direction');const _0x32deb9=[{'value':_0x2ef6f7(0xce),'text':'→'},{'value':_0x2ef6f7(0xed),'text':'↓'},{'value':'to\x20bottom\x20right','text':'↘'},{'value':_0x2ef6f7(0x190),'text':'↙'}];_0x32deb9['forEach'](_0x1eba6a=>{const _0x46b20d=_0x2ef6f7,_0x29f021=document[_0x46b20d(0x13e)](_0x46b20d(0x181));_0x29f021['value']=_0x1eba6a[_0x46b20d(0x16a)],_0x29f021[_0x46b20d(0xd4)]=_0x1eba6a[_0x46b20d(0xd4)],this[_0x46b20d(0xea)][_0x46b20d(0x16f)](_0x29f021);}),this[_0x2ef6f7(0xea)][_0x2ef6f7(0x106)]('change',this[_0x2ef6f7(0x186)][_0x2ef6f7(0x171)](this)),this[_0x2ef6f7(0x13b)]=this[_0x2ef6f7(0xf0)](_0x2ef6f7(0x16b),_0x2ef6f7(0x147),this['onGradientColorChange'][_0x2ef6f7(0x171)](this)),_0x20c480[_0x2ef6f7(0x16f)](this['colorPicker']),_0x20c480[_0x2ef6f7(0x16f)](this['bgColorPicker']),_0x20c480[_0x2ef6f7(0x16f)](_0x1a7bce),_0x3f3d8b['appendChild'](this['startColorPicker']),_0x3f3d8b[_0x2ef6f7(0x16f)](this[_0x2ef6f7(0xea)]),_0x3f3d8b[_0x2ef6f7(0x16f)](this[_0x2ef6f7(0x13b)]),_0x20c480[_0x2ef6f7(0x16f)](_0x3f3d8b),this[_0x2ef6f7(0x196)][_0x2ef6f7(0x16f)](_0x20c480);},'onGradientColorChange'(_0x66dff0){const _0x57ed59=_0x48c8;if(this[_0x57ed59(0x10a)])return;const _0x59a975=this[_0x57ed59(0x166)]['value'],_0x1f7ff7=this['endColorPicker']['value'],_0x34d348=this[_0x57ed59(0xea)][_0x57ed59(0x16a)],_0x96d6d5=this[_0x57ed59(0x15f)]();_0x96d6d5['length']>0x0&&(_0x96d6d5['forEach'](_0x42185e=>{const _0x3fa496=_0x57ed59;_0x42185e['gradientData']={'startColor':_0x59a975,'endColor':_0x1f7ff7,'direction':_0x34d348},!_0x42185e['_originalDrawBackground']&&_0x42185e[_0x3fa496(0x11f)]['prototype'][_0x3fa496(0x148)]&&(_0x42185e[_0x3fa496(0x14c)]=_0x42185e[_0x3fa496(0x11f)][_0x3fa496(0x151)][_0x3fa496(0x148)],_0x42185e[_0x3fa496(0x11f)][_0x3fa496(0x151)]['onDrawBackground']=function(_0x1f487c){const _0x840bc=_0x3fa496;if(this['gradientData']){const [_0x40843e,_0x5aa48c]=[0x0,0x0],[_0x4683d0,_0xc92d5a]=this[_0x840bc(0xf4)];let _0x12a599;switch(this['gradientData'][_0x840bc(0x14b)]){case'to\x20right':_0x12a599=_0x1f487c[_0x840bc(0x12a)](_0x40843e,_0x5aa48c,_0x40843e+_0x4683d0,_0x5aa48c);break;case _0x840bc(0xed):_0x12a599=_0x1f487c['createLinearGradient'](_0x40843e,_0x5aa48c,_0x40843e,_0x5aa48c+_0xc92d5a);break;case _0x840bc(0x17c):_0x12a599=_0x1f487c[_0x840bc(0x12a)](_0x40843e,_0x5aa48c,_0x40843e+_0x4683d0,_0x5aa48c+_0xc92d5a);break;case _0x840bc(0x190):_0x12a599=_0x1f487c[_0x840bc(0x12a)](_0x40843e+_0x4683d0,_0x5aa48c,_0x40843e,_0x5aa48c+_0xc92d5a);break;default:_0x12a599=_0x1f487c[_0x840bc(0x12a)](_0x40843e,_0x5aa48c,_0x40843e+_0x4683d0,_0x5aa48c);}_0x12a599[_0x840bc(0xca)](0x0,this[_0x840bc(0x178)][_0x840bc(0x160)]),_0x12a599[_0x840bc(0xca)](0x1,this['gradientData'][_0x840bc(0x154)]),_0x1f487c['fillStyle']=_0x12a599,_0x1f487c['fillRect'](_0x40843e,_0x5aa48c,_0x4683d0,_0xc92d5a);}else this[_0x840bc(0x14c)][_0x840bc(0x12b)](this,_0x1f487c);});}),LGraphCanvas[_0x57ed59(0x12f)]&&LGraphCanvas['active_canvas'][_0x57ed59(0x132)](!![],!![]));},'createSingleColorPicker'(_0x3ad4d2,_0x65c392,_0xcd2334){const _0x31da66=_0x48c8,_0xbfcbe9=document['createElement'](_0x31da66(0x156));return _0xbfcbe9[_0x31da66(0x152)]=_0x31da66(0x15e),_0xbfcbe9['id']=_0x3ad4d2,_0xbfcbe9[_0x31da66(0x19f)][_0x31da66(0x13a)](_0x31da66(0x159)),_0xbfcbe9[_0x31da66(0x14f)]=_0x65c392,_0xbfcbe9[_0x31da66(0x106)](_0x31da66(0x156),_0xcd2334),_0xbfcbe9['addEventListener'](_0x31da66(0x105),_0xcd2334),_0xbfcbe9;},'onNodeColorChange'(_0x4bbc79){const _0xeb193f=_0x48c8;if(this[_0xeb193f(0x10a)])return;const _0x350351=_0x4bbc79['target'][_0xeb193f(0x16a)],_0x11c7c7=this[_0xeb193f(0x15f)]();_0x11c7c7[_0xeb193f(0xdd)]>0x0&&(_0x11c7c7[_0xeb193f(0x117)](_0x15f3b7=>{const _0x2cbf51=_0xeb193f;_0x15f3b7[_0x2cbf51(0x15e)]=_0x350351;}),LGraphCanvas[_0xeb193f(0x12f)]&&LGraphCanvas['active_canvas']['setDirty'](!![],!![]));},'onNodeBgColorChange'(_0x39555f){const _0x15fcd9=_0x48c8;if(this[_0x15fcd9(0x10a)])return;const _0x2bc997=_0x39555f[_0x15fcd9(0x115)][_0x15fcd9(0x16a)],_0x3892da=this['getSelectedNodes']();_0x3892da[_0x15fcd9(0xdd)]>0x0&&(_0x3892da[_0x15fcd9(0x117)](_0x1cba3b=>{const _0x4ef203=_0x15fcd9;_0x1cba3b[_0x4ef203(0x119)]=_0x2bc997;}),LGraphCanvas['active_canvas']&&LGraphCanvas[_0x15fcd9(0x12f)]['setDirty'](!![],!![]));},'pollForCanvas'(){const _0x3a72c2=_0x48c8,_0x10168c=document[_0x3a72c2(0x197)](_0x3a72c2(0xf2));if(_0x10168c)ButtonManager[_0x3a72c2(0x13c)](),_0x10168c[_0x3a72c2(0x106)](_0x3a72c2(0x12e),_0x1f8b11=>{const _0x1a1189=_0x3a72c2;if(!ButtonManager[_0x1a1189(0xe0)]){const _0x83427c=ButtonManager[_0x1a1189(0x15f)]();if(_0x83427c[_0x1a1189(0xdd)]>=0x2){const _0x441e3a=_0x10168c['getBoundingClientRect'](),_0x20395d=_0x1f8b11[_0x1a1189(0x14a)]-_0x441e3a['left'],_0x1888a8=_0x1f8b11[_0x1a1189(0xf3)]-_0x441e3a['top'];ButtonManager['show'](),ButtonManager[_0x1a1189(0x153)](_0x20395d,Math[_0x1a1189(0xe8)](_0x1888a8-0x28,0x0));}else ButtonManager[_0x1a1189(0xef)]();}});else attempts<maxAttempts&&(attempts++,setTimeout(pollForCanvas,0x3e8));}};function _0x48c8(_0x14493b,_0x5a4c59){const _0x153672=_0x1536();return _0x48c8=function(_0x48c83e,_0x31c28f){_0x48c83e=_0x48c83e-0xc6;let _0x212a20=_0x153672[_0x48c83e];return _0x212a20;},_0x48c8(_0x14493b,_0x5a4c59);}function _0x1536(){const _0x28ec04=['inputs','value','gradient-end-color','mousemove','calculateCenterInGroup','updateCanvas','appendChild','isInitialized','bind','divider','verticalDistribution','alignTop','20px','div','color-picker-container','gradientData','has','22912092pxYOMp','scale','to\x20bottom\x20right','zIndex','selectNodes','gradient-start-color','active','option','alignCenterVertically','offsetTop','createButtons','top','onGradientColorChange','treeView','parse','originalColor','push','pop','custom-button','block','onDragStart','initUndoRedo','to\x20bottom\x20left','mousedown','innerWidth','627784lWMdtD','show','垂直居中','buttonContainer','querySelector','abs','left','重置颜色','tooltip','originalSize','min','keydown','classList','466965KAOygH','originalPos','pos','4272360KdUhlB','display','左对齐','addColorStop','getButtons','redo','layerY','to\x20right','map','colorPicker','getItem','outputs','head','text','stopPropagation','垂直分布','智能对齐','alignRight','button','maxUndoStackSize','dragStartX','shiftKey','length','reset','selected_nodes','isPermanent','position','1581696ovdncx','boundOnDragging','filter','titleGradientData','boundOnDragEnd','undoStack','max','createDivider','gradientDirection','dragStartY','2548734WIEwHK','to\x20bottom','width','hide','createSingleColorPicker','flex','canvas#graph-canvas','clientY','size','link','shift','水平分布','originalGradientData','node-bg-color-picker','undo','redoStack','alignCenterHorizontally','key','9999','select','originalY','树形视图','links','alignLeft','node','change','addEventListener','originalOtherPos','analyzeConnections','isDragging','isUpdatingPickers','水平居中','createColorPickers','find','bgColorPicker','Show\x20permanently','action','Gradient\x20Start\x20Color','updateColorPickers','sort','none','target','style','forEach','mouseleave','bgcolor','ctrlKey','getNodesBounds','alignBottom','every','offsetLeft','constructor','originalTitleGradientData','values','onDragging','includes','顶部对齐','disabled','resetNodeColors','equalWidth','layerX','equalHeight','createLinearGradient','call','keys','onNodeColorChange','click','active_canvas','Select\x20Title\x20Color','getMaxWidth','setDirty','equalSize','3713591PoMooL','toggleMode','addToUndoStack','20txHOLx','offset','#333333','add','endColorPicker','init','底部对齐','createElement','#ffffff','NodeAlignerButtonPosition','originalX','getBoundingClientRect','10StlQKl','onNodeBgColorChange','buildSimpleHierarchy','Select\x20Background\x20Color','Gradient\x20End\x20Color','onDrawBackground','smartAlign','clientX','direction','_originalDrawBackground','toggle','updateToggleButton','title','setItem','prototype','type','setPosition','endColor','originalBgColor','input','detectDoubleLinkNodes','preventDefault','color-picker','updateUndoRedoButtons','右对齐','stringify','height','color','getSelectedNodes','startColor','innerHTML','innerHeight','hasShownTooltip','some','horizontalDistribution','startColorPicker','getElementById','reduce'];_0x1536=function(){return _0x28ec04;};return _0x1536();}let attempts=0x0;const maxAttempts=0xa;function pollForCanvas(){const _0x2fd7af=_0x48c8,_0x59513f=document[_0x2fd7af(0x197)](_0x2fd7af(0xf2));if(_0x59513f)ButtonManager[_0x2fd7af(0x13c)](),_0x59513f[_0x2fd7af(0x106)](_0x2fd7af(0x12e),function(_0x29e73c){const _0x146a1c=_0x2fd7af;if(!ButtonManager[_0x146a1c(0xe0)]){const _0x3a0462=ButtonManager[_0x146a1c(0x15f)]();_0x3a0462[_0x146a1c(0xdd)]>=0x2?(ButtonManager[_0x146a1c(0x194)](),ButtonManager[_0x146a1c(0x153)](_0x29e73c[_0x146a1c(0x128)],_0x29e73c[_0x146a1c(0xcd)]-0x28)):ButtonManager['hide']();}});else attempts<maxAttempts&&(attempts++,setTimeout(pollForCanvas,0x3e8));}pollForCanvas();